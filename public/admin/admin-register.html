<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <title>Admin registreren (eerste keer)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { color-scheme: light dark; }
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:24px}
    .card{max-width:480px;margin:auto;border:1px solid #eee;border-radius:12px;padding:18px;background:#fff}
    label{display:block;font-size:14px;margin:10px 0 4px}
    input{width:100%;padding:10px 12px;border:1px solid #ccc;border-radius:8px}
    button{margin-top:16px;background:#f0a000;color:#111;padding:10px 14px;border:none;border-radius:10px;font-weight:700;width:100%}
    pre{background:#0b1020;color:#cde;padding:12px;border-radius:8px;overflow:auto}
  </style>
</head>
<body>
  <div class="card">
    <h1>üêæ Admin registreren</h1>
    <p>Gebruik hier de <strong>SETUP_TOKEN</strong> die in Render ‚Üí Environment staat.</p>

    <label>Setup token</label>
    <input id="token" placeholder="bv. Superhond1983" />

    <label>Naam</label>
    <input id="name" placeholder="Voornaam Achternaam" />

    <label>E-mail</label>
    <input id="email" type="email" placeholder="email@voorbeeld.be" />

    <label>Wachtwoord</label>
    <input id="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />

    <button id="btn">Aanmaken</button>
    <div id="out"></div>
  </div>

  <script>
    const out = document.getElementById('out');
    document.getElementById('btn').addEventListener('click', async () => {
      out.innerHTML = '';
      const payload = {
        token: document.getElementById('token').value.trim(),
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim(),
        password: document.getElementById('password').value
      };
      try {
        const res = await fetch('/api/admin/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        const data = await res.json();
        if (!res.ok) throw data;
        out.innerHTML = '<pre>‚úÖ Superadmin aangemaakt.\n'+JSON.stringify(data.user,null,2)+'</pre>';
        setTimeout(()=>location.href='/admin/admin-login.html', 900);
      } catch (e) {
        out.innerHTML = '<pre>'+JSON.stringify(e,null,2)+'</pre>';
      }
    });
  </script>
</body>
</html>
