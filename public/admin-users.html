<!doctype html>
<html lang="nl">
<head><meta charset="utf-8"><title>Admin gebruikers</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="/public/css/app.css" rel="stylesheet"></head>
<body>
<header><a class="back" href="/public/index.html">← Terug</a>
<div class="brand">👩‍💼 Admin gebruikers</div></header>
<main class="grid2">
<section class="card"><h2>Bestaande gebruikers</h2><div id="list">Laden…</div></section>
<section class="card"><h2>Nieuwe gebruiker</h2>
<form id="form"><label>Naam <input name="name" required></label>
<label>E-mail <input name="email" type="email" required></label>
<label>Wachtwoord <input name="pass" type="password" required></label>
<label>Rol <select name="role"><option value="admin">admin</option><option value="superadmin">superadmin</option></select></label>
<button type="submit">+ Toevoegen</button></form>
<pre id="out">{"info":"Resultaat verschijnt hier."}</pre></section></main>
<script>
async function loadUsers(){const r=await fetch('/api/admin/users');const j=await r.json();const box=document.getElementById('list');
if(!j.ok) return box.textContent='Fout bij laden.';
if(!j.users.length) return box.textContent='Geen gebruikers gevonden.';
box.innerHTML=j.users.map(u=>`<div><b>${u.name}</b> (${u.email}) – ${u.role}</div>`).join('');}
document.getElementById('form').addEventListener('submit',async e=>{e.preventDefault();const data=Object.fromEntries(new FormData(e.target).entries());
const r=await fetch('/api/admin/users',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
const j=await r.json();document.getElementById('out').textContent=JSON.stringify(j,null,2);if(j.ok){e.target.reset();loadUsers();}});
loadUsers();
</script></body></html>