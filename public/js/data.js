
const KEY='SH_DB_V0172_REDO';
function loadDB(){ try{ return JSON.parse(localStorage.getItem(KEY)) || {"namen": [{"id": "nm1", "naam": "Puppy Start", "lesduur": 60}, {"id": "nm2", "naam": "Basisgroep", "lesduur": 60}, {"id": "nm3", "naam": "Pubergroep", "lesduur": 90}], "types": [{"id": "tp1", "type": "Groep"}, {"id": "tp2", "type": "Workshop"}], "themas": [{"id": "th1", "naam": "Start"}, {"id": "th2", "naam": "Gevorderd"}], "klassen": [{"id": "kl1", "naamId": "nm1", "typeId": "tp1", "themaId": "th1", "capaciteit": 10, "strippen": 1}, {"id": "kl2", "naamId": "nm2", "typeId": "tp1", "themaId": "th2", "capaciteit": 8, "strippen": 2}, {"id": "kl3", "naamId": "nm3", "typeId": "tp2", "themaId": "th1", "capaciteit": 12, "strippen": 1}], "locaties": [{"id": "loc1", "naam": "Retie Terrein", "adres": "Kloosterstraat 12", "plaats": "Retie", "land": "BE"}, {"id": "loc2", "naam": "Dessel Park", "adres": "Stationsstraat 5", "plaats": "Dessel", "land": "BE"}, {"id": "loc3", "naam": "Mol Centrum", "adres": "Markt 1", "plaats": "Mol", "land": "BE"}], "trainers": [{"id": "tr1", "naam": "Sofie"}, {"id": "tr2", "naam": "Paul"}, {"id": "tr3", "naam": "Nancy"}], "lesdagen": [{"id": "ld1", "klasId": "kl1", "datum": "2025-09-15", "start": "10:00", "einde": "11:00", "locatieId": "loc1", "trainerIds": ["tr1"], "status": "active"}, {"id": "ld2", "klasId": "kl2", "datum": "2025-09-01", "start": "09:30", "einde": "10:30", "locatieId": "loc2", "trainerIds": ["tr2"], "status": "active"}]}; }catch(e){ return {"namen": [{"id": "nm1", "naam": "Puppy Start", "lesduur": 60}, {"id": "nm2", "naam": "Basisgroep", "lesduur": 60}, {"id": "nm3", "naam": "Pubergroep", "lesduur": 90}], "types": [{"id": "tp1", "type": "Groep"}, {"id": "tp2", "type": "Workshop"}], "themas": [{"id": "th1", "naam": "Start"}, {"id": "th2", "naam": "Gevorderd"}], "klassen": [{"id": "kl1", "naamId": "nm1", "typeId": "tp1", "themaId": "th1", "capaciteit": 10, "strippen": 1}, {"id": "kl2", "naamId": "nm2", "typeId": "tp1", "themaId": "th2", "capaciteit": 8, "strippen": 2}, {"id": "kl3", "naamId": "nm3", "typeId": "tp2", "themaId": "th1", "capaciteit": 12, "strippen": 1}], "locaties": [{"id": "loc1", "naam": "Retie Terrein", "adres": "Kloosterstraat 12", "plaats": "Retie", "land": "BE"}, {"id": "loc2", "naam": "Dessel Park", "adres": "Stationsstraat 5", "plaats": "Dessel", "land": "BE"}, {"id": "loc3", "naam": "Mol Centrum", "adres": "Markt 1", "plaats": "Mol", "land": "BE"}], "trainers": [{"id": "tr1", "naam": "Sofie"}, {"id": "tr2", "naam": "Paul"}, {"id": "tr3", "naam": "Nancy"}], "lesdagen": [{"id": "ld1", "klasId": "kl1", "datum": "2025-09-15", "start": "10:00", "einde": "11:00", "locatieId": "loc1", "trainerIds": ["tr1"], "status": "active"}, {"id": "ld2", "klasId": "kl2", "datum": "2025-09-01", "start": "09:30", "einde": "10:30", "locatieId": "loc2", "trainerIds": ["tr2"], "status": "active"}]}; } }
function saveDB(db){ localStorage.setItem(KEY, JSON.stringify(db)); }
function uid(p){return p+'_'+Math.random().toString(36).slice(2,9);}
function addMinutesToTime(timeStr,minutes){const [h,m]=timeStr.split(':').map(x=>+x);const t=h*60+m+minutes;const hh=('0'+Math.floor(t/60)%24).slice(-2);const mm=('0'+t%60).slice(-2);return hh+':'+mm;}
