
const KEY='SH_LESSEN_DB_v0153';
function loadDB(){ try{ return JSON.parse(localStorage.getItem(KEY)) || {"namen": [{"id": "nm1", "naam": "Puppy Start", "lesduur": 60}, {"id": "nm2", "naam": "Basisgroep", "lesduur": 60}, {"id": "nm3", "naam": "Pubergroep", "lesduur": 90}], "types": [{"id": "tp1", "type": "Groep"}, {"id": "tp2", "type": "Workshop"}, {"id": "tp3", "type": "Priv\u00e9"}], "locaties": [{"id": "loc1", "naam": "Retie Terrein", "adres": "Kloosterstraat 12", "plaats": "Retie", "land": "BE"}, {"id": "loc2", "naam": "Dessel Park", "adres": "Stationsstraat 5", "plaats": "Dessel", "land": "BE"}], "themas": [{"id": "th1", "naam": "Start"}, {"id": "th2", "naam": "Gevorderd"}], "trainers": [{"id": "tr1", "naam": "Sofie"}, {"id": "tr2", "naam": "Paul"}, {"id": "tr3", "naam": "Nancy"}], "lessen": [{"id": "ls1", "naamId": "nm2", "typeId": "tp1", "locatieId": "loc2", "themaId": "th2", "trainerIds": ["tr2", "tr3"], "datum": "2025-10-04", "tijd": "11:00", "eindtijd": "12:00", "capaciteit": 10}, {"id": "ls2", "naamId": "nm1", "typeId": "tp1", "locatieId": "loc1", "themaId": "th1", "trainerIds": ["tr1"], "datum": "2025-10-01", "tijd": "10:00", "eindtijd": "11:00", "capaciteit": 8}]}; }catch(e){ return {"namen": [{"id": "nm1", "naam": "Puppy Start", "lesduur": 60}, {"id": "nm2", "naam": "Basisgroep", "lesduur": 60}, {"id": "nm3", "naam": "Pubergroep", "lesduur": 90}], "types": [{"id": "tp1", "type": "Groep"}, {"id": "tp2", "type": "Workshop"}, {"id": "tp3", "type": "Priv\u00e9"}], "locaties": [{"id": "loc1", "naam": "Retie Terrein", "adres": "Kloosterstraat 12", "plaats": "Retie", "land": "BE"}, {"id": "loc2", "naam": "Dessel Park", "adres": "Stationsstraat 5", "plaats": "Dessel", "land": "BE"}], "themas": [{"id": "th1", "naam": "Start"}, {"id": "th2", "naam": "Gevorderd"}], "trainers": [{"id": "tr1", "naam": "Sofie"}, {"id": "tr2", "naam": "Paul"}, {"id": "tr3", "naam": "Nancy"}], "lessen": [{"id": "ls1", "naamId": "nm2", "typeId": "tp1", "locatieId": "loc2", "themaId": "th2", "trainerIds": ["tr2", "tr3"], "datum": "2025-10-04", "tijd": "11:00", "eindtijd": "12:00", "capaciteit": 10}, {"id": "ls2", "naamId": "nm1", "typeId": "tp1", "locatieId": "loc1", "themaId": "th1", "trainerIds": ["tr1"], "datum": "2025-10-01", "tijd": "10:00", "eindtijd": "11:00", "capaciteit": 8}]}; } }
function saveDB(db){ localStorage.setItem(KEY, JSON.stringify(db)); }
function uid(prefix){ return prefix + '_' + Math.random().toString(36).slice(2,9); }
function addMinutesToTime(timeStr, minutes){ const [h,m]=(timeStr||'00:00').split(':').map(x=>parseInt(x)||0); const total=h*60+m+(parseInt(minutes)||0); const hh=Math.floor(total/60)%24; const mm=total%60; const pad=n=>String(n).padStart(2,'0'); return `${pad(hh)}:${pad(mm)}`; }
window.SHDB = { loadDB, saveDB, uid, addMinutesToTime };
