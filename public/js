document.addEventListener("DOMContentLoaded", () => {
  const trainingForm = document.getElementById("training-form");
  const tableBody = document.querySelector("#lessen-tabel tbody");

  // Functie om tabel te vullen
  function renderLessen() {
    const data = JSON.parse(localStorage.getItem("trainingSettingsList") || "[]");
    tableBody.innerHTML = "";

    if (data.length === 0) {
      tableBody.innerHTML = `<tr class="placeholder"><td colspan="8" style="text-align:center;color:#777;">
        Nog geen lessen toegevoegd. Vul hierboven het formulier in om een les aan te maken.
      </td></tr>`;
      return;
    }

    data.forEach(les => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${les.benaming}</td>
        <td>${les.beschrijving}</td>
        <td>${les.themas}</td>
        <td>${les.geldigheid}</td>
        <td>${les.startdatum ?? ""}</td>
        <td>${les.max}</td>
        <td>${les.actief === "J" ? "Ja" : "Nee"}</td>
        <td>${les.online === "J" ? "Ja" : "Nee"}</td>
      `;
      tableBody.appendChild(row);
    });
  }

  renderLessen();

  trainingForm.addEventListener("submit", e => {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(trainingForm).entries());
    const list = JSON.parse(localStorage.getItem("trainingSettingsList") || "[]");

    list.push(data);
    localStorage.setItem("trainingSettingsList", JSON.stringify(list));
    trainingForm.reset();
    renderLessen();
    showNotification("Les toegevoegd", "success");
  });
});
